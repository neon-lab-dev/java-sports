import{j as e,b as $,c as _,e as z,h as A,i as I,_ as n,L as C,R as l,g as P,s as k,d as H}from"./index-2jesu54P.js";import{C as S,h as W,c as F}from"./cross-pntt5Yzv.js";import{r as R,e as E,c as g}from"./getPriceAfterDiscount-VCdwUlk6.js";const T=({className:s=""})=>e.jsx($,{className:`sm:min-w-[300px] snap-center xs:snap-start min-w-[230px] card-shadow rounded-xl h-[330px] sm:h-[350px] ${s}`}),M="data:image/svg+xml,%3csvg%20width='47'%20height='47'%20viewBox='0%200%2047%2047'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='23.5'%20cy='23.5'%20r='23.5'%20fill='%23EE3F4C'/%3e%3cpath%20d='M29%2030C29.5304%2030%2030.0391%2030.2107%2030.4142%2030.5858C30.7893%2030.9609%2031%2031.4696%2031%2032C31%2032.5304%2030.7893%2033.0391%2030.4142%2033.4142C30.0391%2033.7893%2029.5304%2034%2029%2034C28.4696%2034%2027.9609%2033.7893%2027.5858%2033.4142C27.2107%2033.0391%2027%2032.5304%2027%2032C27%2030.89%2027.89%2030%2029%2030ZM13%2014H16.27L17.21%2016H32C32.2652%2016%2032.5196%2016.1054%2032.7071%2016.2929C32.8946%2016.4804%2033%2016.7348%2033%2017C33%2017.17%2032.95%2017.34%2032.88%2017.5L29.3%2023.97C28.96%2024.58%2028.3%2025%2027.55%2025H20.1L19.2%2026.63L19.17%2026.75C19.17%2026.8163%2019.1963%2026.8799%2019.2432%2026.9268C19.2901%2026.9737%2019.3537%2027%2019.42%2027H31V29H19C18.4696%2029%2017.9609%2028.7893%2017.5858%2028.4142C17.2107%2028.0391%2017%2027.5304%2017%2027C17%2026.65%2017.09%2026.32%2017.24%2026.04L18.6%2023.59L15%2016H13V14ZM19%2030C19.5304%2030%2020.0391%2030.2107%2020.4142%2030.5858C20.7893%2030.9609%2021%2031.4696%2021%2032C21%2032.5304%2020.7893%2033.0391%2020.4142%2033.4142C20.0391%2033.7893%2019.5304%2034%2019%2034C18.4696%2034%2017.9609%2033.7893%2017.5858%2033.4142C17.2107%2033.0391%2017%2032.5304%2017%2032C17%2030.89%2017.89%2030%2019%2030ZM28%2023L30.78%2018H18.14L20.5%2023H28Z'%20fill='white'/%3e%3c/svg%3e",w="/assets/no-image-2wuRXskc.jpg",D=({product:s,className:j=""})=>{var c,m,h,x,d,f;const v=_(),{user:i}=z(t=>t.user),a=i==null?void 0:i.wishlist.filter(t=>t.product===s._id).length,u=A(),p=()=>{l.event({category:"Cart Items",action:`Added ${s.name} to cart with id ${s._id}`});const y=[...P("cartItems",[]).filter(N=>N.id!==s._id),{id:s._id,product:s._id,quantity:1,color:s.color,size:s.sizes[0].size,side:s.sub_category2==="Gloves"?"Left":void 0,name:s.name,image:s.images[0].url,price:g(s.sizes[0].basePrice,s.sizes[0].discountedPercent),basePrice:s.sizes[0].basePrice}];k("cartItems",y),n.success(`Added ${s.name} to cart!`),v(H())},{mutate:b,isPending:o}=I({mutationFn:t=>a?R(t):E(t),onSuccess:()=>{n.success(`${a?"Removed":"Added"} ${s.name} ${a?"from":"to"} wishlist!`),u.invalidateQueries({queryKey:["user"]})},onError:t=>{n.error(t)}}),L=()=>{a?l.event({category:"Wishlist",action:`Removed ${s.name} from wishlist with id ${s._id}`}):l.event({category:"Wishlist",action:`Added ${s.name} to wishlist with id ${s._id}`}),b(s._id)},r=(c=s.sizes)==null?void 0:c.every(t=>t.stock===0);return e.jsxs("div",{className:`sm:min-w-[300px] w-full xs:w-auto snap-center xs:snap-start min-w-[230px] card-shadow rounded-xl p-3 sm:p-4 flex flex-col gap-2 "h-[330px] sm:h-[400px] ${j}`,children:[e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("span",{className:"font-Lato font-700 text-[11px] text-grey-light",children:"Java Sports"}),e.jsx("button",{disabled:o,onClick:L,className:"cursor-pointer",children:o?e.jsx(S,{size:26,color:"#00B553"}):e.jsx("img",{src:a?F:W,alt:"Wishlist",className:"w-7 h-7 sm:w-8 sm:h-8 hover:text-primary`"})})]}),e.jsx(C,{to:`/product/${s._id}`,className:"max-w-full max-h-[200px] h-[220px] sm:max-h-[240px] relative sm:h-[240px]  bg-[#F2F2F2] rounded-md group overflow-hidden w-full",children:e.jsx("img",{src:((m=s==null?void 0:s.images[0])==null?void 0:m.url)||w,alt:s.name,onError:t=>t.currentTarget.src=w,className:"w-full h-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 object-contain object-center group-hover:scale-105 transition-all"})}),e.jsx(C,{to:`/product/${s._id}`,className:"text-base sm:text-lg hover:underline hover:text-blue transition-all",children:s.name.split(" ").slice(0,4).join(" ")}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"flex gap-2 items-center",children:[e.jsxs("span",{className:"font-Lato font-700",children:["₹",g((h=s.sizes[0])==null?void 0:h.basePrice,(x=s.sizes[0])==null?void 0:x.discountedPercent)]}),e.jsxs("span",{className:"font-Lato font-500 text-[0.65rem] sm:text-xs line-through",children:["₹",((d=s.sizes[0])==null?void 0:d.basePrice)||0]}),e.jsxs("span",{className:"text-[#00B553] font-500",children:[((f=s.sizes[0])==null?void 0:f.discountedPercent)||0,"% off"]})]}),!r&&e.jsx("button",{onClick:p,children:e.jsx("img",{src:M,alt:"Add to Cart",className:"w-9 sm:w-10 h-9 sm:h-10"})})]}),r&&e.jsx("div",{className:"text-red-500 font-900 font-Lato justify-center flex ",children:"Out of stock"})]})};export{D as A,T as C,w as n};
